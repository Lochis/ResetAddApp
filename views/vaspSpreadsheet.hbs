<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="AMDSB Applications Approval Database" />

    <title>AMDSB Application Approvals</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <link rel="stylesheet" href="../public/stylesheets/style.css">
</head>

<body>
    {{> navbar}}
    {{#if isAuthenticated }}
        <div id="form-container" class="container">
            <button class="btn btn-primary" id="get-spreadsheet">
                Update Spreadsheet
            </button>
           </div>

           <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Completed</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Progress</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-contact" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">Pending</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-noAssessment-tab" data-bs-toggle="pill" data-bs-target="#pills-noAssessment" type="button" role="tab" aria-controls="pills-noAssessment" aria-selected="false">No Assessment</button>
            </li>
            </ul>
            <div class="tab-content" id="pills-tabContent">
            <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                 <table id="completedApps" class="table table-striped">
                    <thead>
                        <tr>
                            {{#each apps.completedAppsHeaders}}
                            <th scope="col">{{this}}</th>
                            {{/each}}
                        </tr>
                    </thead>
                    <tbody>
                        {{#each apps.completedApps}}
                        <tr>
                        {{#each this}}
                            <td>{{this}}</td>
                        {{/each}}
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
            <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                 <table id="completedApps" class="table table-striped">
                    <thead>
                        <tr>
                            {{#each apps.progressAppsHeaders}}
                            <th scope="col">{{this}}</th>
                            {{/each}}
                        </tr>
                    </thead>
                    <tbody>
                        {{#each apps.progressApps}}
                        <tr>
                        {{#each this}}
                            <td>{{this}}</td>
                        {{/each}}
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
            <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
                 <table id="completedApps" class="table table-striped">
                    <thead>
                        <tr>
                            {{#each apps.pendingAppsHeaders}}
                            <th scope="col">{{this}}</th>
                            {{/each}}
                        </tr>
                    </thead>
                    <tbody>
                        {{#each apps.pendingApps}}
                        <tr>
                        {{#each this}}
                            <td>{{this}}</td>
                        {{/each}}
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
            <div class="tab-pane fade" id="pills-noAssessment" role="tabpanel" aria-labelledby="pills-noAssessment-tab"></div>
                <table id="completedApps" class="table table-striped">
                    <thead>
                        <tr>
                            {{#each apps.noAssessmentAppsHeaders}}
                            <th scope="col">{{this}}</th>
                            {{/each}}
                        </tr>
                    </thead>
                    <tbody>
                        {{#each apps.noAssessmentApps}}
                        <tr>
                        {{#each this}}
                            <td>{{this}}</td>
                        {{/each}}
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
            </div>

       
                <!-- decending, newest shows at the top -->
                <!--{{#each VASPapp}}
                    <div class="accordion-item" id="item-{{@index}}">
                        <h2 class="accordion-header" id="heading{{@index}}">
                            <button class="accordion-button bg-dark" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapse{{@index}}" aria-expanded="false" aria-controls="collapse{{@index}}">
                                <h5 class="applicationLink mb-0">
                                    {{{Application}}}
                                </h5>
                            </button>
                        </h2>
                        <div id="collapse{{@index}}" class="accordion-collapse collapse hide"
                            aria-labelledby="heading{{@index}}" data-bs-parent="#accordion">
                            
                            <div class="accordion-body">
                                    <button type="button" data-id="{{@index}}" style="float: right;" class="delete-btn btn btn-secondary">Delete</button>
                                    <h5 style="display:inline">Link: </h5><span>{{{Application}}}</span>
                                    <br>
                                    <br>
                                    <h5 style="display:inline">Status: </h5><span>{{Status}}</span>
                                    <br>
                                    <br>
                                    <h5 style="display:inline">Description and Cost: </h5>{{{"Description and Cost"}}}
                                    <br>
                                    <br>
                                    <h5 style="display:inline">Report: </h5> {{{"VASP Educator Report"}}}
                            </div>
                        </div>
                    </div>
                    {{/each}}-->
        
                </div>
            </div>

                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Potential Matches</h5>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body" id="modalBody">

                    </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                        </div>
                        </div>
                    </div>
                    </div>

         <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    {{/if}}

    <script>
        toastr.options = {
                positionClass: 'toast-top-center',

            };
         $("#get-spreadsheet").click(function () {
                $.ajax({
                    url: '/vaspSpreadsheet/get-spreadsheet',
                    type: 'POST',
                    //data: { },
                    success: function (data) {
                        toastr.success("Got updated spreadsheet");
                    }
                });
            });
    </script>
    </body>

</html>
